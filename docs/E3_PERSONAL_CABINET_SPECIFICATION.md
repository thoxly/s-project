# E3 - Личный кабинет сотрудника - Техническое задание

## Обзор проекта

**Цель**: Создать полнофункциональный личный кабинет сотрудника для корпоративного портала Portal S с интеграцией ELMA365, демонстрирующий персонализацию и рабочее место сотрудника.

**Контекст**: Демо-портал для компании "С" с фокусом на визуальной убедительности для топ-менеджера, показывающий возможности интеграции ELMA365 + React/Node для внутренних процессов организации.

## Архитектурные требования

### Технический стек

- **Frontend**: React 18 + Vite + Material-UI (MUI) + React Router
- **Backend**: Node.js + Express + MongoDB
- **Интеграция**: REST API ELMA365
- **Стили**: Следование STYLE_GUIDE.md проекта

### Структура данных

```javascript
// Модель User (MongoDB)
{
  _id: ObjectId,
  id: Number,
  name: String,
  position: String,
  email: String,
  phone: String,
  workPhone: String,
  department: String,
  organization: String,
  birthday: Date,
  avatar: String,
  isManager: Boolean,
  managerId: Number,
  colleagues: [Number],
  achievements: [Object],
  thanks: [Object],
  createdAt: Date,
  updatedAt: Date
}

// Модель Request (MongoDB)
{
  _id: ObjectId,
  id: Number,
  title: String,
  description: String,
  type: String, // 'vacation', 'business_trip', 'certificate', etc.
  status: String, // 'pending', 'in_progress', 'completed', 'rejected'
  priority: String, // 'low', 'medium', 'high'
  userId: Number,
  elmaProcessId: String,
  createdAt: Date,
  updatedAt: Date,
  completedAt: Date
}
```

## Функциональные требования

### 1. Профиль сотрудника (Левая колонка)

#### 1.1 Основная информация

- **Фото сотрудника**: Аватар с возможностью загрузки/изменения
- **Персональные данные**:
  - ФИО (полное имя)
  - Должность
  - Организация/подразделение
  - Дата рождения
  - Личный телефон
  - Рабочий телефон
  - Email

#### 1.2 Признания и достижения

- **Благодарности коллег**: Список благодарностей с датами и авторами
- **Успехи и достижения**: Карточки достижений с описанием и датой

#### 1.3 Руководство и коллеги

- **Непосредственный руководитель**:
  - Фото руководителя
  - ФИО
  - Должность
  - Контактная информация
- **Коллеги**: Список коллег из того же отдела
  - Фото
  - ФИО
  - Должность
  - Организация

### 2. Рабочий календарь и задачи (Центральная колонка)

#### 2.1 Календарь совещаний/встреч

- Отображение предстоящих встреч
- Интеграция с корпоративным календарем
- Возможность просмотра деталей встречи

#### 2.2 Управление задачами

- **Задачи синх. ТЭЗИС**: Интеграция с системой ТЭЗИС
- **Поручения синх. ТЭЗИС**: Полученные поручения
- **Резолюции синх. ТЭЗИС**: Резолюции по задачам
- **Письма синх. RuPost**: Корпоративная почта
- **Процесс согласования**: Заявки на согласование
- **Создание СЗ**: Создание служебных записок
- **Проекты**: Участие в проектах
- **Nextcloud**: Интеграция с файловым хранилищем
- **Мои задачи**: Счетчик активных задач

#### 2.3 Коммуникации и развитие

- **Мессенджер**: Корпоративный чат
- **Индивидуальный план развития**: Планы карьерного роста
- **Оценка 360**: Система обратной связи
- **Адаптация нового сотрудника**: Для новых сотрудников

### 3. Заявки и сервисы (Правая колонка)

#### 3.1 Каталог заявок

- **Заявление на отпуск**: Создание и отслеживание заявок на отпуск
- **График отпусков**: Просмотр графика отпусков
- **Заявка на трудоустройство**: Для руководителей
- **Заказать справку 2 НДФЛ**: Налоговые справки
- **Расчетный листок**: Просмотр зарплатных ведомостей
- **Заявление о переводе**: Смена должности
- **Заявление на увольнение**: Процедура увольнения
- **Заявление на командировку**: Бизнес-поездки
- **Заявление об открытии счета**: Зарплатная карта
- **Справка о налоговом вычете**: Налоговые льготы
- **Справка с места работы**: Трудовые справки
- **Записать ребенка в ДС/школу**: Корпоративные льготы
- **Записаться в медицинский центр**: Медобслуживание
- **Записаться в поликлинику университета**: Университетская поликлиника
- **Инвентаризация**: Учет имущества

#### 3.2 Статус заявок

- **Статус по заявкам**: Отслеживание всех поданных заявок
- Фильтрация по статусам (в ожидании, в работе, завершено, отклонено)
- История изменений статусов
- Уведомления об изменении статуса

#### 3.3 Обратная связь

- **ЕСТЬ ИДЕЯ**: Форма для предложений и идей
- **Расскажи о себе**: Обновление личной информации

## Технические требования

### API Endpoints

#### Пользователи

```
GET /api/users/profile/current - Получить текущего пользователя
PUT /api/users/profile/current - Обновить профиль
GET /api/users/:id - Получить пользователя по ID
GET /api/users/colleagues/:userId - Получить коллег пользователя
GET /api/users/manager/:userId - Получить руководителя пользователя
```

#### Заявки

```
GET /api/requests/user/:userId - Получить заявки пользователя
POST /api/requests - Создать новую заявку
GET /api/requests/:id - Получить заявку по ID
PUT /api/requests/:id - Обновить заявку
GET /api/requests/status/:userId - Получить статусы заявок
```

#### ELMA365 интеграция

```
POST /api/elma/support - Создать заявку в ELMA
GET /api/elma/status/:processId - Получить статус процесса
POST /api/elma/vacation - Создать заявку на отпуск
POST /api/elma/business-trip - Создать заявку на командировку
```

#### Календарь

```
GET /api/calendar/events/:userId - Получить события календаря
POST /api/calendar/events - Создать событие
PUT /api/calendar/events/:id - Обновить событие
DELETE /api/calendar/events/:id - Удалить событие
```

### Компоненты React

#### Основные компоненты

- `ProfileCard` - Карточка профиля сотрудника
- `ManagerCard` - Информация о руководителе
- `ColleaguesList` - Список коллег
- `AchievementsList` - Достижения и благодарности
- `CalendarWidget` - Виджет календаря
- `TasksWidget` - Виджет задач
- `RequestsTable` - Таблица заявок
- `RequestForm` - Форма создания заявки
- `StatusTracker` - Отслеживание статусов
- `IdeaForm` - Форма для идей

#### Виджеты

- `PersonalInfoWidget` - Личная информация
- `ManagerInfoWidget` - Информация о руководителе
- `ColleaguesWidget` - Коллеги
- `AchievementsWidget` - Достижения
- `CalendarWidget` - Календарь
- `TasksWidget` - Задачи
- `RequestsWidget` - Заявки
- `StatusWidget` - Статусы
- `IdeasWidget` - Идеи

### Интеграция с ELMA365

#### Процессы

1. **Заявка в техподдержку** (уже реализован)
2. **Заявка на отпуск**
3. **Заявка на командировку**
4. **Создание справки**
5. **Согласование документов**

#### Синхронизация данных

- Автоматическая синхронизация статусов заявок
- Webhook'и для обновления статусов
- Периодическая синхронизация календаря
- Синхронизация задач из ТЭЗИС

## Дизайн и UX

### Макет страницы

```
┌─────────────────────────────────────────────────────────────┐
│ Header: Логотип + Приветствие + Уведомления + Профиль      │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────────┐ ┌─────────────────────┐ │
│ │   Профиль   │ │   Календарь     │ │    Заявки          │ │
│ │             │ │                 │ │                     │ │
│ │ - Фото      │ │ - Встречи       │ │ - Каталог услуг     │ │
│ │ - ФИО       │ │ - События       │ │ - Мои заявки        │ │
│ │ - Должность │ │                 │ │ - Статусы          │ │
│ │ - Контакты  │ │ ┌─────────────┐ │ │                     │ │
│ │             │ │ │   Задачи    │ │ │ ┌─────────────────┐ │ │
│ │ ┌─────────┐ │ │ │             │ │ │ │   Обратная     │ │ │
│ │ │Руководи-│ │ │ │ - ТЭЗИС      │ │ │ │   связь        │ │ │
│ │ │тель     │ │ │ │ - Поручения  │ │ │ │                 │ │ │
│ │ └─────────┘ │ │ │ - Резолюции  │ │ │ │ - ЕСТЬ ИДЕЯ    │ │ │
│ │             │ │ │ - RuPost     │ │ │ │ - Расскажи     │ │ │
│ │ ┌─────────┐ │ │ │ - Согласова- │ │ │ │   о себе       │ │ │
│ │ │Коллеги  │ │ │ │   ние        │ │ │ └─────────────────┘ │ │
│ │ └─────────┘ │ │ │ - СЗ         │ │ │                     │ │
│ │             │ │ │ - Проекты    │ │ │                     │ │
│ │ ┌─────────┐ │ │ │ - Nextcloud  │ │ │                     │ │
│ │ │Достиже- │ │ │ │ - Мои задачи │ │ │                     │ │
│ │ │ния      │ │ │ └─────────────┘ │ │                     │ │
│ │ └─────────┘ │ │                 │ │                     │ │
│ │             │ │ ┌─────────────┐ │ │                     │ │
│ │             │ │ │ Развитие    │ │ │                     │ │
│ │             │ │ │             │ │ │                     │ │
│ │             │ │ │ - Мессенджер │ │ │                     │ │
│ │             │ │ │ - План разв.│ │ │                     │ │
│ │             │ │ │ - Оценка 360 │ │ │                     │ │
│ │             │ │ │ - Адаптация │ │ │                     │ │
│ │             │ │ └─────────────┘ │ │                     │ │
│ └─────────────┘ └─────────────────┘ └─────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### Адаптивность

- **Desktop** (1200px+): Трехколоночный макет
- **Tablet** (768px-1199px): Двухколоночный макет
- **Mobile** (до 767px): Одноколоночный макет с аккордеоном

### Интерактивность

- Drag & Drop для перестановки виджетов
- Модальные окна для детального просмотра
- Анимации при загрузке и переходах
- Уведомления в реальном времени
- Автосохранение форм

## Этапы разработки

### Этап 1: Базовая структура (1-2 дня)

- [ ] Создание макета страницы Profile
- [ ] Настройка роутинга
- [ ] Базовые компоненты (ProfileCard, ManagerCard)
- [ ] Интеграция с API пользователей

### Этап 2: Профиль сотрудника (2-3 дня)

- [ ] Компонент личной информации
- [ ] Информация о руководителе
- [ ] Список коллег
- [ ] Достижения и благодарности
- [ ] Загрузка аватара

### Этап 3: Календарь и задачи (2-3 дня)

- [ ] Виджет календаря
- [ ] Интеграция с календарными событиями
- [ ] Виджет задач
- [ ] Синхронизация с ТЭЗИС
- [ ] Мессенджер (базовая версия)

### Этап 4: Заявки и сервисы (3-4 дня)

- [ ] Каталог заявок
- [ ] Формы создания заявок
- [ ] Таблица "Мои заявки"
- [ ] Отслеживание статусов
- [ ] Интеграция с ELMA365

### Этап 5: Обратная связь и финализация (1-2 дня)

- [ ] Форма "ЕСТЬ ИДЕЯ"
- [ ] Обновление профиля
- [ ] Уведомления
- [ ] Тестирование
- [ ] Полировка UI/UX

## Критерии приемки

### Функциональные требования

- [ ] Все разделы личного кабинета отображаются корректно
- [ ] Данные загружаются из API
- [ ] Формы создания заявок работают
- [ ] Интеграция с ELMA365 функционирует
- [ ] Календарь отображает события
- [ ] Статусы заявок обновляются в реальном времени

### Технические требования

- [ ] Адаптивный дизайн для всех устройств
- [ ] Производительность: загрузка страницы < 2 сек
- [ ] Соответствие STYLE_GUIDE.md
- [ ] Отсутствие ошибок в консоли
- [ ] Корректная работа с горячей перезагрузкой

### UX требования

- [ ] Интуитивная навигация
- [ ] Плавные анимации
- [ ] Понятные уведомления
- [ ] Быстрый отклик на действия пользователя

## Риски и ограничения

### Технические риски

- **Интеграция с ELMA365**: Сложность настройки API
- **Производительность**: Большое количество данных
- **Синхронизация**: Конфликты данных между системами

### Ограничения

- **Mock данные**: Для демо-версии используются заглушки
- **Безопасность**: Базовая аутентификация
- **Масштабируемость**: Оптимизация для демо-показа

## Заключение

Данное техническое задание описывает создание полнофункционального личного кабинета сотрудника с интеграцией ELMA365, следуя принципам современного веб-разработки и корпоративных стандартов. Реализация должна продемонстрировать возможности персонализации и автоматизации HR-процессов в корпоративной среде.
